{% extends "blog/base.html" %}
{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/codemirror.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/dracula.min.css">

<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/codemirror.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/mode/python/python.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/mode/javascript/javascript.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/mode/htmlmixed/htmlmixed.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/mode/css/css.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/mode/xml/xml.min.js"></script>
{% endblock extra_head %}

{% block title %}{{ site_setup.title }} - {{ post.title }}{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'blog/css/pages/post.css' %}">
{% endblock %}

{% block content %}
<article class="post-wrapper">

  <!-- Cover Image -->
  {% if post.cover_in_post_content and post.cover %}
  <div class="post-cover">
    <img loading="lazy" src="{{ post.cover.url }}" alt="{{ post.title }} cover image">
  </div>
  {% endif %}

  <!-- Post Header Section -->
  <header class="post-header container">
    <h1 class="post-title">{{ post.title }}</h1>

    <div class="post-meta">
      {% if not post.created_by.get_full_name %}
      <span class="meta-author"><a href="{% url 'blog:posts_by_author' post.created_by.pk %}">{{ post.created_by.username }}</a></span>
      {% else %}
      <span class="meta-author"><a href="{% url 'blog:posts_by_author' post.created_by.pk %}">{{ post.created_by.get_full_name }}</a></span>
      {% endif %}

      <span class="meta-separator">•</span>
      <span class="meta-date">{{ post.created_at }}</span>

      {% if post.category %}
      <span class="meta-separator">•</span>
      <span class="meta-category">
	<a href="{% url 'blog:posts_by_category' post.category.slug %}">{{ post.category.name }}</a>
      </span>
      {% endif %}

      {% if post.tags.exists %}
      <span class="meta-separator">•</span>
      <span class="meta-category">
        {% for tag in post.tags.all %}
	<a href="{% url 'blog:posts_by_tag' tag.slug %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
        {% endfor %}
      </span>
        {% endif %}
    </div>

    <p class="post-excerpt">{{ post.excerpt }}</p><hr>
  </header>

  <!-- Main Content -->
  <section class="post-content container">
    <p>{{ post.content|safe }}</p>
  </section>

</article>
{% endblock %}

